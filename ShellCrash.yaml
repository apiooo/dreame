# ========================================================
# 1. ä»£ç†æºé…ç½® (Proxy Provider)
# ========================================================
proxy-providers:
  ProviderAirPort:
    url: "http://xxxxxxxxxxx"
    type: http
    interval: 86400
    health-check:
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 300

proxies:
  - name: "ç›´è¿ž"
    type: direct
  - name: "æ‹’ç»"
    type: reject

# ========================================================
# 2. å…¨å±€åŸºç¡€è®¾ç½® (Global Settings)
# ========================================================
# å„ç§åè®®çš„ç›‘å¬ç«¯å£
port: 8888              # HTTP ä»£ç†ç«¯å£
socks-port: 8885        # SOCKS5 ä»£ç†ç«¯å£
redir-port: 8886        # é€æ˜Žä»£ç†ç«¯å£ (æ—§ç‰ˆ Linux å¸¸ç”¨)
mixed-port: 8887        # æ··åˆä»£ç†ç«¯å£ (åŒæ—¶æ”¯æŒ HTTP/SOCKS)
tproxy-port: 8889       # TProxy ç«¯å£ (ShellCrash æŽ¨è, å¤„ç† UDP æ€§èƒ½æ›´å¼º)

# åŸºç¡€è¿žæŽ¥é…ç½®
allow-lan: true         # å…è®¸å±€åŸŸç½‘å†…å…¶ä»–è®¾å¤‡è¿žæŽ¥ (å¦‚æ‰«åœ°æœº)
bind-address: "0.0.0.0" # ç›‘å¬æ‰€æœ‰ç½‘ç»œæŽ¥å£çš„ IP
ipv6: false             # ç¦ç”¨ IPv6 (é˜²æ­¢å¢ƒå¤–æµé‡é€šè¿‡ IPv6 æ³„éœ²ï¼Œå»ºè®®å…³é—­)

# è¿žæŽ¥ä¼˜åŒ–
unified-delay: true     # ç»Ÿä¸€å»¶è¿Ÿ (å°†å¤šçº¿è¿žæŽ¥çš„å»¶è¿Ÿå–å¹³å‡/åˆå¹¶æ˜¾ç¤º)
tcp-concurrent: true    # TCP å¹¶å‘è¿žæŽ¥ (åŠ å¿«é¦–æ¬¡æ¡æ‰‹é€Ÿåº¦)
log-level: info         # æ—¥å¿—ç­‰çº§ (info/warning/error/debug, è°ƒè¯•æ—¶å¯è®¾ä¸º debug)
mode: Rule              # è¿è¡Œæ¨¡å¼ (Rule: è§„åˆ™åˆ†æµ / Global: å…¨å±€ä»£ç† / Direct: å…¨ç½‘ç›´è¿ž)

# å»¶è¿Ÿæµ‹è¯•é…ç½® (ç”¨äºŽèŠ‚ç‚¹åˆ—è¡¨çš„å»¶è¿Ÿæ£€æµ‹)
cfw-latency-url: 'http://cp.cloudflare.com/generate_204' # å»¶è¿Ÿæµ‹è¯•åœ°å€
cfw-latency-timeout: 3000   # æµ‹è¯•è¶…æ—¶æ—¶é—´ (æ¯«ç§’)
cfw-latency-type: 1         # å»¶è¿Ÿè®¡ç®—ç±»åž‹

# æŒä¹…åŒ–å­˜å‚¨
profile:
  store-selected: true      # è®°å¿†åŠŸèƒ½ï¼šé‡å¯åŽæ¢å¤ä¸Šæ¬¡é€‰ä¸­çš„èŠ‚ç‚¹
  store-fake-ip: true       # ç¼“å­˜ Fake-IP (åŠ å¿«åŽç»­è§£æžé€Ÿåº¦)

# ========================================================
# 3. DNS æ¨¡å—è®¾ç½® (DNS Configuration)
# ========================================================
dns:
  enable: true              # å¼€å¯ Clash å†…éƒ¨ DNS åŠŸèƒ½
  listen: 0.0.0.0:1053      # DNS ç›‘å¬ç«¯å£ (è·¯ç”±å™¨ç«¯å¸¸è®¾ä¸º 1053)
  ipv6: false               # ç¦ç”¨ DNS çš„ IPv6 è§£æž
  respect-rules: true       # ä¼˜å…ˆéµå¾ªåˆ†æµè§„åˆ™è¿›è¡Œ DNS è§£æž (é˜²æ­¢ DNS æ³„éœ²)
  enhanced-mode: fake-ip    # å¢žå¼ºæ¨¡å¼ï¼šFake-IP (é€æ˜Žä»£ç†çŽ¯å¢ƒä¸‹çš„æœ€ä½³é€‰æ‹©)
  fake-ip-range: 198.18.0.1/16 # Fake-IP çš„åœ°å€æ± èŒƒå›´

  # ä¸Šæ¸¸ DNS æœåŠ¡å™¨åˆ—è¡¨ (ç”¨äºŽè§£æžå¤–éƒ¨åŸŸå)
  nameserver:
    - 1.1.1.1               # Cloudflare å…¬å…± DNS
    - 8.8.8.8               # Google å…¬å…± DNS
    - 223.5.5.5             # é˜¿é‡Œäº‘å…¬å…± DNS (å›½å†…è§£æžå¤‡é€‰)

  # é’ˆå¯¹ç‰¹å®šåŸŸåçš„è§£æžç­–ç•¥ (åˆ†æµè§£æž)
  nameserver-policy:
    '+.baidu.com': [114.114.114.114]               # ç™¾åº¦ç³»åŸŸåä½¿ç”¨ 114 è§£æž
    'rule-set:ChinaMedia,ChinaDomain': [223.5.5.5, 119.29.29.29] # å›½å†…è§„åˆ™é›†ä½¿ç”¨é˜¿é‡Œ/è…¾è®¯ DNS

  # ä»£ç†æœåŠ¡å™¨çš„åŸŸåè§£æž (è§£æžä½ æœºåœºè®¢é˜…é‡Œçš„æœåŠ¡å™¨åœ°å€)
  proxy-server-nameserver:
    - https://1.1.1.1/dns-query # ä½¿ç”¨åŠ å¯†çš„ DoH æ–¹å¼è§£æžèŠ‚ç‚¹åœ°å€
    

# ========================================================
# 4. ç­–ç•¥ç»„é…ç½® (å·²æ•´åˆè¿½è§…ç­–ç•¥)
# ========================================================
proxy-groups:
  - name: ðŸš€ é»˜è®¤ä»£ç†
    type: select
    proxies: [ç›´è¿ž, æ‹’ç», è…¾è®¯äº‘, åŽä¸ºäº‘2, DMIT-S5, vl-reality-DMIT-24, ðŸš€ å›žå›½å‘¨è¾¹, ðŸŒ å…¨éƒ¨èŠ‚ç‚¹, ðŸŒ è‡ªåŠ¨é€‰æ‹©, ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ðŸ‡¸ðŸ‡¬ ç‹®åŸŽèŠ‚ç‚¹, ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹]

  - name: ðŸ›‘ å¹¿å‘Šæ‹¦æˆª
    type: select
    proxies: [æ‹’ç», ç›´è¿ž]

  # >>> è¿½è§…ä¸“å±žç­–ç•¥ç»„ <<<
  - name: ðŸ§¹ è¿½è§…æ‰«åœ°æœº
    type: select
    proxies: [è…¾è®¯äº‘, åŽä¸ºäº‘2, ðŸš€ å›žå›½å‘¨è¾¹, ç›´è¿ž]

  - name: ðŸš€ æŠ–éŸ³
    type: select
    proxies: [ç›´è¿ž, è…¾è®¯äº‘, åŽä¸ºäº‘2, ðŸš€ å›žå›½å‘¨è¾¹, ðŸŒ å…¨éƒ¨èŠ‚ç‚¹]

  - name: ðŸš€ é˜¿é‡Œ
    type: select
    proxies: [ç›´è¿ž, è…¾è®¯äº‘, åŽä¸ºäº‘2, ðŸš€ å›žå›½å‘¨è¾¹]

  - name: ðŸš€ è…¾è®¯
    type: select
    proxies: [ç›´è¿ž, è…¾è®¯äº‘, åŽä¸ºäº‘2, ðŸš€ å›žå›½å‘¨è¾¹]

  - name: ðŸš€ å›žå›½
    type: select
    proxies: [ç›´è¿ž, è…¾è®¯äº‘, åŽä¸ºäº‘2, ðŸš€ å›žå›½å‘¨è¾¹]

  - name: ðŸ€ Google
    type: select
    proxies: [ðŸš€ é»˜è®¤ä»£ç†, ç›´è¿ž, ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹, ðŸŒ å…¨éƒ¨èŠ‚ç‚¹]

  - name: â“‚ï¸ Microsoft
    type: select
    proxies: [ç›´è¿ž, ðŸš€ é»˜è®¤ä»£ç†]

  - name: ðŸŽ è‹¹æžœæœåŠ¡
    type: select
    proxies: [ç›´è¿ž, ðŸš€ é»˜è®¤ä»£ç†]

  - name: ðŸ“² ç”µæŠ¥æ¶ˆæ¯
    type: select
    proxies: [ðŸš€ é»˜è®¤ä»£ç†, ðŸ‡¸ðŸ‡¬ ç‹®åŸŽèŠ‚ç‚¹, ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹]

  - name: ðŸš€ AI
    type: select
    proxies: [ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹, ðŸ‡¯ðŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ðŸ‡¸ðŸ‡¬ ç‹®åŸŽèŠ‚ç‚¹]

  - name: ðŸŽ¶ ç½‘æ˜“éŸ³ä¹
    type: select
    proxies: [ç›´è¿ž, è…¾è®¯äº‘, åŽä¸ºäº‘2]

  - name: ðŸŽ¥ NETFLIX
    type: select
    proxies: [ðŸš€ é»˜è®¤ä»£ç†, ðŸŒ å…¨éƒ¨èŠ‚ç‚¹]

  - name: ðŸ“¹ YouTuBe
    type: select
    proxies: [ðŸš€ é»˜è®¤ä»£ç†, ðŸŒ å…¨éƒ¨èŠ‚ç‚¹]

  - name: ðŸŒ å›½å†…åª’ä½“
    type: select
    proxies: [ç›´è¿ž, ðŸš€ å›žå›½]

  - name: ðŸŒ å›½å¤–åª’ä½“
    type: select
    proxies: [ðŸš€ é»˜è®¤ä»£ç†, ðŸŒ å…¨éƒ¨èŠ‚ç‚¹]

  - name: ðŸŽ¯ ç›´è¿ž
    type: select
    proxies: [ç›´è¿ž, ðŸš€ é»˜è®¤ä»£ç†]

  - name: ðŸŸ æ¼ç½‘ä¹‹é±¼
    type: select
    proxies: [ðŸš€ é»˜è®¤ä»£ç†, ç›´è¿ž, ðŸš€ å›žå›½]

  # --- åœ°åŒºä¸ŽæœåŠ¡å•†åˆ†ç»„ (Filter) ---
  - name: è…¾è®¯äº‘
    use: [ProviderAirPort]
    filter: "(?i)(è…¾è®¯äº‘)"
    type: select
  - name: åŽä¸ºäº‘2
    use: [ProviderAirPort]
    filter: "(?i)(åŽä¸ºäº‘2)"
    type: select
  - name: ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    use: [ProviderAirPort]
    filter: "(?i)(é¦™æ¸¯|æ¸¯|hk|hongkong)"
    type: select
  - name: ðŸ‡¸ðŸ‡¬ ç‹®åŸŽèŠ‚ç‚¹
    use: [ProviderAirPort]
    filter: "(?i)(æ–°åŠ å¡|å¡|sg|singapore)"
    type: select
  - name: ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹
    use: [ProviderAirPort]
    filter: "(?i)(ç¾Žå›½|ç¾Ž|us|united states)"
    type: select
  - name: ðŸš€ å›žå›½å‘¨è¾¹
    use: [ProviderAirPort]
    filter: "(?i)(é¦™æ¸¯|æ¸¯|hk|æ—¥æœ¬|jp|å°æ¹¾|tw|æ–°åŠ å¡|sg|éŸ©å›½|kr|åŽä¸ºäº‘)"
    type: select
  - name: ðŸŒ å…¨éƒ¨èŠ‚ç‚¹
    type: select
    include-all: true
  - name: ðŸŒ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    use: [ProviderAirPort]
    url: 'http://www.apple.com/library/test/success.html'
    interval: 300

# ========================================================
# 5. è§„åˆ™è®¢é˜… (Rule Providers)
# ========================================================
rule-providers:
  # >>> ä½ çš„è‡ªå®šä¹‰è¿½è§…è§„åˆ™è®¢é˜… <<<
  Dreame:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/apiooo/dreame/refs/heads/main/dreame.list"
    path: ./ruleset/dreame.yaml
    interval: 86400

  # --- ACL4SSR è§„åˆ™é›† ---
  LocalAreaNetwork:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/LocalAreaNetwork.list
    behavior: classical
    format: text
    type: http
  BanAD:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/BanAD.list
    behavior: classical
    format: text
    type: http
  Tencent:
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/refs/heads/master/Clash/Ruleset/Tencent.list
    behavior: classical
    format: text
    type: http
  Alibaba:
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Alibaba.list
    behavior: classical
    format: text
    type: http
  ByteDance:
    url: https://raw.githubusercontent.com/tindy2013/subconverter/master/base/rules/ACL4SSR/Clash/Ruleset/ByteDance.list
    behavior: classical
    format: text
    type: http
  GoogleFCM:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/GoogleFCM.list
    behavior: classical
    format: text
    type: http
  Telegram:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Telegram.list
    behavior: classical
    format: text
    type: http
  YouTube:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/YouTube.list
    behavior: classical
    format: text
    type: http
  Netflix:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/Netflix.list
    behavior: classical
    format: text
    type: http
  ChinaDomain:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/ChinaDomain.list
    behavior: classical
    format: text
    type: http

# ========================================================
# 6. åˆ†æµè§„åˆ™ (Rules)
# ========================================================
rules:
  # 1. åŸºç¡€ç›´è¿ž
  - RULE-SET,LocalAreaNetwork,DIRECT,no-resolve
  
  # 2. è¿½è§…ç‰©ç†å°å£ (é’ˆå¯¹æ‰«åœ°æœºå›ºå®š IP)
  # è¯·åŠ¡å¿…åœ¨è·¯ç”±å™¨åŽå°å°†æœºå™¨äºº IP ç»‘å®šä¸º 192.168.31.50
  - SRC-IP-CIDR,192.168.31.50/32,ðŸ§¹ è¿½è§…æ‰«åœ°æœº

  # 3. è¿½è§…è®¢é˜…è§„åˆ™ä¸Ž User-Agent
  - RULE-SET,Dreame,ðŸ§¹ è¿½è§…æ‰«åœ°æœº
  - USER-AGENT,*Dreame*,ðŸ§¹ è¿½è§…æ‰«åœ°æœº
  - USER-AGENT,*Xiaomi*,ðŸ§¹ è¿½è§…æ‰«åœ°æœº
  - DOMAIN-SUFFIX,miot-spec.org,ðŸ§¹ è¿½è§…æ‰«åœ°æœº

  # 4. å…¶ä»–ä¸šåŠ¡é€»è¾‘
  - DOMAIN-SUFFIX,binance.com,ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹
  - RULE-SET,BanAD,ðŸ›‘ å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,Tencent,ðŸš€ è…¾è®¯
  - RULE-SET,Alibaba,ðŸš€ é˜¿é‡Œ
  - RULE-SET,ByteDance,ðŸš€ æŠ–éŸ³
  - RULE-SET,GoogleFCM,ðŸ€ Google
  - RULE-SET,Telegram,ðŸ“² ç”µæŠ¥æ¶ˆæ¯
  - RULE-SET,YouTube,ðŸ“¹ YouTuBe
  - RULE-SET,Netflix,ðŸŽ¥ NETFLIX
  - RULE-SET,ChinaDomain,ðŸš€ å›žå›½
  
  # 5. å…œåº•
  - GEOIP,CN,ðŸš€ å›žå›½
  - MATCH,ðŸŸ æ¼ç½‘ä¹‹é±¼
